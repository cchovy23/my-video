<script>
    async function searchVideo() {
        const query = document.getElementById('urlInput').value;
        const pipedApi = "https://pipedapi.kavin.rocks"; // 파이프드 API 서버
        
        // 검색 API 호출
        const response = await fetch(`${pipedApi}/search?q=${encodeURIComponent(query)}&filter=videos`);
        const data = await response.json();
        
        let html = "";
        data.items.forEach(item => {
            html += `
                <div style="margin: 10px; cursor: pointer; border: 1px solid #333; padding: 10px;" 
                     onclick="playById('${item.url.split('=')[1]}')">
                    <img src="${item.thumbnail}" width="120"><br>
                    <small>${item.title}</small>
                </div>`;
        });
        document.getElementById('searchResults').innerHTML = html;
    }

    function playById(id) {
        document.getElementById('player').src = `https://piped.video/embed/${id}`;
        document.getElementById('videoWrapper').style.display = 'block';
    }
</script>

<div id="searchResults" style="display: flex; flex-wrap: wrap; justify-content: center; margin-top: 20px;"></div>
