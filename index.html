<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Chromebook Player (Piped)</title>
    <style>
        :root { --bg: #0f0f0f; --primary: #ff0000; --text: #ffffff; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); margin: 0; display: flex; flex-direction: column; align-items: center; }
        .header { width: 100%; padding: 20px; background: #1a1a1a; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        .search-box { margin: 30px 0; width: 90%; max-width: 600px; display: flex; gap: 10px; }
        input { flex: 1; padding: 12px; border-radius: 25px; border: 1px solid #333; background: #222; color: white; outline: none; }
        button { padding: 12px 25px; border-radius: 25px; border: none; background: var(--primary); color: white; font-weight: bold; cursor: pointer; }
        button:hover { background: #cc0000; }
        .video-wrapper { width: 90%; max-width: 900px; aspect-ratio: 16 / 9; background: #000; border-radius: 15px; overflow: hidden; display: none; margin-bottom: 50px; }
        iframe { width: 100%; height: 100%; border: none; }
        .footer { font-size: 0.8rem; color: #666; margin-bottom: 20px; }
    </style>
</head>
<body>

    <div class="header">
        <h2>ğŸ¥ Piped Player</h2>
    </div>

    <div class="search-box">
        <input type="text" id="urlInput" placeholder="ìœ íŠœë¸Œ ë§í¬ ë˜ëŠ” ì˜ìƒ IDë¥¼ ì…ë ¥í•˜ì„¸ìš”">
        <button onclick="loadVideo()">ì¬ìƒ</button>
    </div>

    <div id="videoWrapper" class="video-wrapper">
        <iframe id="player" src="" allow="autoplay; fullscreen" allowfullscreen></iframe>
    </div>

    <div class="footer">
        í•™êµ í¬ë¡¬ë¶ ìµœì í™” ëª¨ë“œ | Piped API ì‚¬ìš©
    </div>

    <script>
        function loadVideo() {
            const input = document.getElementById('urlInput').value.trim();
            const player = document.getElementById('player');
            const wrapper = document.getElementById('videoWrapper');

            let videoId = '';

            // ìœ íŠœë¸Œ URLì—ì„œ ID ì¶”ì¶œ
            if (input.includes('v=')) {
                videoId = input.split('v=')[1].split('&')[0];
            } else if (input.includes('youtu.be/')) {
                videoId = input.split('youtu.be/')[1].split('?')[0];
            } else {
                videoId = input; // ì§ì ‘ IDë¥¼ ì…ë ¥í•œ ê²½ìš°
            }

            if (videoId) {
                // íŒŒì´í”„ë“œ ì¸ìŠ¤í„´ìŠ¤ ì£¼ì†Œ (ì•ˆ ë§‰íŒ ì£¼ì†Œë¡œ êµì²´ ê°€ëŠ¥)
                // ê¸°ë³¸ê°’: piped.video (ë§Œì•½ ì´ ì£¼ì†Œê°€ ë§‰íˆë©´ kavin.rocks ë“±ìœ¼ë¡œ ë³€ê²½)
                const pipedInstance = "https://piped.video"; 
                
                player.src = `${pipedInstance}/embed/${videoId}`;
                wrapper.style.display = 'block';
                
                // í™”ë©´ ì•„ë˜ë¡œ ìë™ ìŠ¤í¬ë¡¤
                window.scrollTo({ top: wrapper.offsetTop - 20, behavior: 'smooth' });
            } else {
                alert('ì˜¬ë°”ë¥¸ ì˜ìƒ IDë‚˜ ë§í¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            }
        }

        // ì—”í„°í‚¤ ì§€ì›
        document.getElementById('urlInput').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') loadVideo();
        });
    </script>
</body>
</html>
